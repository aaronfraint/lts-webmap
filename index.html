<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Webmap Template</title>
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no"
    />
    <meta name="created" content="" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
      name="author"
      content="Delaware Valley Regional Planning Commission (DVRPC)"
    />
    <meta name="owner" content="webmaster@dvrpc.org" />
    <meta name="distribution" content="global" />
    <meta name="robots" content="index, follow" />
    <meta name="copyright" content="1995-2020 all rights reserved" />
    <!--  DVRPC Website VERSION #7.0 Copyright (c) 1995-2020 Delaware Valley Regional Planning Commission. All rights reserved.   -->

    <!-- social media -->
    <meta property="og:title" content="" />
    <meta propery="og:type" content="website" />
    <meta property="og:url" content="" />
    <meta property="og:description" content="" />
    <meta property="og:image" content="" />

    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,500,700&amp;display=swap"
    />
    <link
      rel="stylesheet"
      href="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css"
    />

    <!-- TURF LIBRARY -->
    <script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>

    <!-- MAPBOX DRAWING PLUGIN -->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.0/mapbox-gl-draw.js"></script>
    <link
      rel="stylesheet"
      href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.0/mapbox-gl-draw.css"
      type="text/css"
    />

    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/mobile.css" media="(max-width: 800px)" />

    <script defer type="module" src="./js/index.js"></script>
  </head>

  <body>
    <nav class="flex-row flex-between">
      <div class="flex-row">
        <a href="/" class="nav-links"
          ><img
            src="./img/DVRPC-logo.png"
            alt="DVRPC logo"
            id="dvrpc-logo"
            class="nav-logos"
        /></a>
        <!-- <span class="nav-vr">|</span>
        <img
          src="./imgs/project-logo.png"
          alt="project logo"
          class="nav-logos"
        /> -->
        <span class="nav-vr">|</span>
        <button id="modal-toggle" class="nav-btn nav-links">about</button>
      </div>

      <div>
        <a href="/" class="nav-links">other</a>
        <a href="/" class="nav-links">links</a>
      </div>
    </nav>

    <main id="main-content-wrapper" class="flex-row flex-between">
      <article id="sidebar">
        <div id="sidebar-content">
          <h1>This is a prototype / proof of concept!</h1>
          <br />
          <hr />
          <br />
          <h2>About</h2>
          <p>
            This map is hosted on
            <a href="https://pages.github.com">GitHub Pages</a>
            (free!), uses
            <a href="https://www.mapbox.com/mapbox-gljs">MapboxGL.js</a>
            to render the map, and
            <a href="https://turfjs.org">turf.js</a>
            to perform client-side geospatial operations. In addition, it uses
            three unique services hosted on
            <a href="https://www.digitalocean.com">Digital Ocean</a>
            ($$$):
          </p>
          <ul>
            <li>
              <a href="http://157.230.82.238:8080">Vector tiles</a>
              hosted via Tileserver GL and Docker ($5/month)
            </li>
            <li>
              <a href="https://lts-fastapi-c8pjh.ondigitalocean.app/docs"
                >an API written in Python with FastAPI</a
              >
              ($5/month)
            </li>
            <li>data stored in a PostgreSQL database ($15/month)</li>
          </ul>
          <br />
          <p>It shows:</p>
          <ul>
            <li>Dashed lines for high-stress (Bike LTS 3 or 4) roadways</li>
            <li>
              Colorful lines for low-stress (Bike LTS 1 or 2) islands of
              connectivity
            </li>
          </ul>
          <br />
          <h2>Usage</h2>
          <ul>
            <li>Zoom in to an area of interest</li>
            <li>
              Click the rectangle icon on the right side of the map to enable
              drawing
            </li>
            <li>
              Click on the map to draw a polygon around stretch of roadway
            </li>
            <li>Double-click your last point to finish the drawing</li>
          </ul>
          <br />
          <p>The map will then perform the following actions:</p>
          <ol>
            <li>
              Use turf.js to select the LTS 3 and 4 segments within your polygon
            </li>
            <li>
              Query the Python API with the ID values of the selected segments,
              which subsequently queries the PostgreSQL database to find
              low-stress islands that intersect the selected segments
            </li>
            <li>
              Refresh the map display, showing the selected segments in cyan and
              the merged islands with a yellow underline
            </li>
          </ol>
        </div>
      </article>

      <div id="map"></div>
    </main>

    <div id="modal" role="dialog">
      <div id="modal-content">
        <span id="close-modal">&times;</span>

        <h2 class="modal-content-subheader">Modal content goes here</h2>
        <p>About the project, methodology, disclaimer, contact info, etc.</p>
      </div>
    </div>

    <footer class="flex-row flex-around">footer</footer>

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js"></script>
  </body>
</html>
